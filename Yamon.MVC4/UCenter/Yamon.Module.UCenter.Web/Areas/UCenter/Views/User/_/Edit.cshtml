
@{
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由亚萌智能表单代码生成工具生成。
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。除非此项目不再使用代码生成器生成。
//     如果想修改此文件的内容，请复制一份到此文件的上级目录进行修改
//
//     如有问题联系zongeasy@qq.com
//</auto-generated>
//------------------------------------------------------------------------------
    ViewBag.Title="编辑用户";
}

<div region="center" border="true" style="padding: 10px; background: #FFFFFF; border: 1px solid #ccc;">
    <form id="myForm" name="myForm" action="/api/UCenter/User/Edit" method="post">
        <table class="mytable"  cellpadding="1" width="100%" cellspacing="0" align="center">
<tr id="Container_UserName"><td id="Label_UserName" class="labeltd">用户名：</td><td>&nbsp;<input type="hidden" id="UserName"  name="UserName" value="@(Model.UserName)"/><span id="UserName_ShowValue">@(Model.UserName)</span></td></tr>
<tr id="Container_PassWord"><td id="Label_PassWord" class="labeltd">密码：</td><td>&nbsp;
<input type="password" id="PassWord" name="PassWord" value="@(Model.PassWord)" class="easyui-validatebox textbox" required="true"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_ConfirmPassword"><td id="Label_ConfirmPassword" class="labeltd">密码确认：</td><td>&nbsp;
<input type="password" id="ConfirmPassword" name="ConfirmPassword" value="@(Model.ConfirmPassword)" class="easyui-validatebox textbox" required="true"  maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_TrueName"><td id="Label_TrueName" class="labeltd">真实姓名：</td><td>&nbsp;
<input type="text" id="TrueName" name="TrueName" value="@(Model.TrueName)" class="easyui-validatebox textbox"  maxlength="20" style="width:200px" />
</td></tr>
<tr id="Container_Email"><td id="Label_Email" class="labeltd">Email：</td><td>&nbsp;
<input type="text" id="Email" name="Email" value="@(Model.Email)" class="easyui-validatebox textbox" validType="email"  [''] maxlength="30" style="width:200px" />
<span title="用于接收系统提示消息"  class="easyui-tooltip"><a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-help'"></a></span></td></tr>
<tr id="Container_DepartmentID"><td id="Label_DepartmentID" class="labeltd">所属部门：</td><td>&nbsp;

<input id="DepartmentID" name="DepartmentID" url="/api/UCenter/Department/EditTree?&Value=@(Model.DepartmentID)" value="@(Model.DepartmentID)" style="width: 200px" required="true" />
<script type="text/javascript">
    var DepartmentID_Value = '@(Model.DepartmentID)';
    jQuery(function() {
        jQuery('#DepartmentID').combotree(
        {
            onLoadSuccess:function(node, data) {
                jQuery('#DepartmentID').combotree('setValue',DepartmentID_Value);
            }
        });
    });
</script>
</td></tr>
<tr id="Container_RoleID"><td id="Label_RoleID" class="labeltd">系统角色：</td><td>&nbsp;
<select id="RoleID" name="RoleID" class="easyui-combobox" multiple="true" required="true"  style="width:200px">
    @Html.Raw(MyHtmlHelper2.ShowSelectOptions(ViewBag.DAL.NameValue_RoleID, Model.RoleID))
</select></td></tr>
<tr id="Container_Tel"><td id="Label_Tel" class="labeltd">手机号：</td><td>&nbsp;
<input type="text" id="Tel" name="Tel" value="@(Model.Tel)" class="easyui-validatebox textbox" validType="mobile"  [''] maxlength="30" style="width:200px" />
</td></tr>
<tr id="Container_Photo"><td id="Label_Photo" class="labeltd">用户照片：</td><td>&nbsp;
<input type="text" id="Photo" name="Photo" value="@(Model.Photo)"   class="easyui-validatebox" style="width:200px"/>
<br/>
<input class="easyui-filebox" data-options="buttonText:'浏览',accept: 'image/*',buttonAlign:'left'" id="Upload_Photo" name="Upload_Photo" style="width: 200px;" />
<input class="easyui-linkbutton" type="button" id="btnPhoto_Upload" name="btnPhoto_Upload" value="上传" onclick="btnPhoto_UploadClick()"/>
@if(!string.IsNullOrEmpty(Model.Photo)){
 <br/><img id="Preview_Photo" src="@(Model.Photo)" style="height: 60px; "/>
}else{
 <br/><img id="Preview_Photo" src="@(Model.Photo)" style="height: 60px; display: none; "/>
 }
<script type="text/javascript">
    ///上传按钮事件
    function btnPhoto_UploadClick(){
        jQuery("#myForm").ajaxSubmit( {
            type: 'post',
            dataType: 'text',
            url: "/api/SiteManage/UploadImage/Upload?FieldName=Photo&UploadFieldName=Upload_Photo&ModelID=User&ModuleID=UCenter",
            beforeSubmit: function(formData, jqForm, options) {
                var queryString = jQuery.param(formData);
                if( jQuery("Upload_Photo").val()==""){
                    alert("请选择你要上传的图片！");
                }
                return true;
            },
            success: function(msg) {
                eval("var result="+msg);
                if(result.Status==1){
                    jQuery("#Photo").val(result.returnValue);
                    alert("上传成功!");
                    $('#Upload_Photo').filebox('clear');
                    $('#Preview_Photo').attr('src',result.returnValue);
                }else{
                    alert(result.returnValue);
                }
            },
            error: function(error) {
            }
        });
    }
</script>
<span title="用户照片"  class="easyui-tooltip"><a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-help'"></a></span></td></tr>
<tr id="Container_IsLockIP"><td id="Label_IsLockIP" class="labeltd">是否限制IP：</td><td>&nbsp;

@Html.Raw(MyHtmlHelper2.ShowRadio(ViewBag.DAL.NameValue_IsLockIP, "IsLockIP", Model.IsLockIP, "&nbsp;&nbsp;"))
</td></tr>
<tr id="Container_LockIP"><td id="Label_LockIP" class="labeltd">限定IP：</td><td>&nbsp;
<textarea id="LockIP" name="LockIP" class="easyui-validatebox"  style="width:400px;height:60px">@(Model.LockIP)</textarea>
</td></tr>
<input type="hidden" id="UserID"  name="UserID" value="@(Model.UserID)"/>
</table>

        @RenderPage("~/Areas/UCenter/Views/User/Extend/Model_FormHtml.cshtml")
    </form>
</div>
<div region="south" border="false" style="text-align: right; background: #F6F6F6;height: 30px; line-height: 30px;">
    <a id="btnSubmit" class="easyui-linkbutton" icon="icon-ok" href="javascript:void(0)">确定</a>
    <a id="btnCancel" class="easyui-linkbutton" icon="icon-cancel" href="javascript:CloseDialog();">
        取消
    </a>
</div>
@section scripts{
    <script src="/Resources/JsLib/jquery.form.js"></script>
    <script src="/Resources/JsLib/My97DatePicker/WdatePicker.js"></script>
    <script src="/Static/v1/js/Utils.js"></script>
    <script src="/Static/v1/js/form.js"></script>
    <script type="text/javascript">
        jQuery(function() {
            CheckConditions();
jQuery('input[name=IsLockIP]').bind('click', CheckConditions);
function CheckConditions(){
if(IsInCheckBox(document.myForm.IsLockIP,'1')){
jQuery('#Container_LockIP').show();
} 
else{ 
jQuery('#Container_LockIP').hide();
} 
jQuery('fieldset').show(); 
jQuery("fieldset").each(function(){ 
if(jQuery('tr',this).length>0){
if(jQuery('tr:visible',this).length>0){jQuery(this).show()} else{jQuery(this).hide()}
}
});
}
;
        });
    </script>
    @RenderPage("~/Areas/UCenter/Views/User/Extend/Model_FormJs.cshtml")
}

