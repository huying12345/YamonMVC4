#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Yamon.Framework.Common;
    using Yamon.Module.SiteManage.Entity;
    using Yamon.Module.UCenter;
    
    #line 1 "..\..\Areas\UCenter\Views\Role\SetUserRole.cshtml"
    using Yamon.Module.UCenter.DAL;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Areas\UCenter\Views\Role\SetUserRole.cshtml"
    using Yamon.Module.UCenter.Entity;
    
    #line default
    #line hidden
    using Yamon.Module.UCenter.Web;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/UCenter/Views/Role/SetUserRole.cshtml")]
    public partial class _Areas_UCenter_Views_Role_SetUserRole_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_UCenter_Views_Role_SetUserRole_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 3 "..\..\Areas\UCenter\Views\Role\SetUserRole.cshtml"
  
    string roleId = RequestHelper.GetString("RoleID");
    RoleDAL roleDal = new RoleDAL();
    Role role = roleDal.GetModelByID(roleId);
    string roleName = role.RoleName;

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<div");

WriteLiteral(" id=\"tabs\"");

WriteLiteral(" region=\"center\"");

WriteLiteral(" title=\"待选用户\"");

WriteLiteral(" split=\"true\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" id=\"UserList\"");

WriteLiteral(" style=\"padding: 5px;\"");

WriteLiteral(">\r\n    </div>\r\n</div>\r\n<div");

WriteLiteral(" region=\"east\"");

WriteAttribute("title", Tuple.Create(" title=\"", 401), Tuple.Create("\"", 426)
            
            #line 14 "..\..\Areas\UCenter\Views\Role\SetUserRole.cshtml"
, Tuple.Create(Tuple.Create("", 409), Tuple.Create<System.Object, System.Int32>(roleName
            
            #line default
            #line hidden
, 409), false)
, Tuple.Create(Tuple.Create("", 420), Tuple.Create("--已选用户", 420), true)
);

WriteLiteral(" split=\"true\"");

WriteLiteral(" style=\"width: 400px;\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" id=\"SelectedUserList\"");

WriteLiteral(">\r\n    </div>\r\n    <input");

WriteLiteral(" type=\"hidden\"");

WriteLiteral(" id=\"SelectUserID\"");

WriteLiteral(" name=\"SelectUserID\"");

WriteLiteral(" />\r\n</div>\r\n<div");

WriteLiteral(" region=\"south\"");

WriteLiteral(" border=\"false\"");

WriteLiteral(" style=\"text-align: right; background: #F6F6F6;\r\n            height: 30px; line-h" +
"eight: 30px;\"");

WriteLiteral(">\r\n    <a");

WriteLiteral(" id=\"btnOK\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" icon=\"icon-ok\"");

WriteLiteral(" href=\"javascript:Save()\"");

WriteLiteral(">确定</a>\r\n    <a");

WriteLiteral(" id=\"btnCancel\"");

WriteLiteral(" class=\"easyui-linkbutton\"");

WriteLiteral(" icon=\"icon-cancel\"");

WriteLiteral(" href=\"javascript:CloseDialog();\"");

WriteLiteral(">\r\n        关闭\r\n    </a>\r\n</div>\r\n\r\n");

DefineSection("scripts", () => {

WriteLiteral("\r\n\r\n    <script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n        var roleId = \"");

            
            #line 30 "..\..\Areas\UCenter\Views\Role\SetUserRole.cshtml"
                  Write(roleId);

            
            #line default
            #line hidden
WriteLiteral("\";\r\n        jQuery(function () {\r\n            jQuery(\'#UserList\').datagrid({\r\n   " +
"             url: \'/api/UCenter/User/GetUserListByRoleID?RoleID=\' + roleId + \'&s" +
"elected=0\',\r\n                queryParams: { \"ModelId\": \"Employee\" },\r\n          " +
"      height: 440,\r\n                fitColumns: true, //设置横向滚动条没有，宽度永远只有那么大\r\n   " +
"             striped: true, //行是否隔行换样式\r\n                nowrap: true,\r\n         " +
"       loadMsg: \'数据加载中，请稍等...\', //显示加载信息\r\n                rownumbers: true, //显示" +
"序号\r\n                singleSelect: true, //单选一行\r\n\r\n                sortName: \'use" +
"rid\',\r\n                sortOrder: \'desc\',\r\n                remoteSort: true,\r\n  " +
"              idField: \'userid\',\r\n                frozenColumns: [\r\n            " +
"        [\r\n                        {\r\n                            field: \'Role_N" +
"odePurview\',\r\n                            title: \'选择\',\r\n                        " +
"    width: 50,\r\n                            align: \'center\',\r\n                  " +
"          formatter: function (value, row, index) {\r\n\r\n                         " +
"       return \"<a href=\'#\' onclick=\'AppendRow(\" + row.userid + \")\' style=\'color:" +
"red;\'>选择</a>\";\r\n                            }\r\n                        }\r\n      " +
"              ]\r\n                ],\r\n                columns: [\r\n               " +
"     [\r\n                        { field: \'userid\', title: \'用户编号\', sortable: true" +
", width: 60, align: \'left\' },\r\n                        { field: \'username\', titl" +
"e: \'用户名\', sortable: true, width: 60, align: \'left\' },\r\n                        {" +
" field: \'truename\', title: \'真实姓名\', sortable: true, width: 100, align: \'left\' },\r" +
"\n                        { field: \'departmentid_showvalue\', title: \'所属部门\', sorta" +
"ble: true, width: 100, align: \'left\' },\r\n                        { field: \'posit" +
"ion_showvalue\', title: \'岗位\', sortable: true, width: 100, align: \'left\' }\r\n      " +
"              ]\r\n                ],\r\n                onBeforeLoad: function (row" +
", param) {\r\n                    jQuery(this).datagrid(\'unselectAll\');\r\n         " +
"       },\r\n\r\n                onDblClickRow: function (rowIndex, rowData) {\r\n    " +
"                //viewData(rowData.UserID);\r\n                },\r\n               " +
" onClickRow: function (rowIndex) {\r\n\r\n                }\r\n            });\r\n\r\n\r\n  " +
"          var pager = jQuery(\'#UserList\').datagrid(\"getPager\");\r\n            pag" +
"er.pagination({\r\n                showPageList: false,\r\n                displayMs" +
"g: \"{from}-{to}/{total}\"\r\n            });\r\n\r\n\r\n            jQuery(\'#SelectedUser" +
"List\').datagrid({\r\n                url: \'/api/UCenter/User/GetUserListByRoleID?R" +
"oleID=\' + roleId + \'&selected=1\',\r\n                queryParams: { \"ModelId\": \"Em" +
"ployee\" },\r\n                height: 440,\r\n                fitColumns: true, //设置" +
"横向滚动条没有，宽度永远只有那么大\r\n                striped: true, //行是否隔行换样式\r\n                no" +
"wrap: true,\r\n                loadMsg: \'数据加载中，请稍等...\', //显示加载信息\r\n                " +
"rownumbers: true, //显示序号\r\n                singleSelect: true, //单选一行\r\n          " +
"      sortName: \'userid\',\r\n                sortOrder: \'desc\',\r\n                r" +
"emoteSort: true,\r\n                idField: \'userid\',\r\n                frozenColu" +
"mns: [\r\n                    [\r\n                        {\r\n                      " +
"      field: \'Role_NodePurview\',\r\n                            title: \'删除\',\r\n    " +
"                        width: 50,\r\n                            align: \'center\'," +
"\r\n                            formatter: function (value, row, index) {\r\n       " +
"                         return \"<a href=\'#\' onclick=\'DeleteRow(\" + row.userid +" +
" \");\' style=\'color:red;\'>删除</a>\";\r\n                            }\r\n              " +
"          }\r\n                    ]\r\n                ],\r\n                columns:" +
" [\r\n                    [\r\n                        { field: \'userid\', title: \'用户" +
"编号\', sortable: true, width: 60, align: \'left\' },\r\n                        { fiel" +
"d: \'username\', title: \'用户名\', sortable: true, width: 60, align: \'left\' },\r\n      " +
"                  { field: \'truename\', title: \'真实姓名\', sortable: true, width: 100" +
", align: \'left\' },\r\n                        { field: \'departmentid_showvalue\', t" +
"itle: \'所属部门\', sortable: true, width: 100, align: \'left\' },\r\n                    " +
"    { field: \'position_showvalue\', title: \'岗位\', sortable: true, width: 100, alig" +
"n: \'left\' }\r\n                    ]\r\n                ],\r\n                onBefore" +
"Load: function (row, param) {\r\n                    jQuery(this).datagrid(\'unsele" +
"ctAll\');\r\n                },\r\n\r\n                onDblClickRow: function (rowInde" +
"x, rowData) {\r\n                    //viewData(rowData.UserID);\r\n                " +
"},\r\n                onClickRow: function (rowIndex) {\r\n\r\n                }\r\n\r\n  " +
"          });\r\n            var pager1 = jQuery(\'#SelectedUserList\').datagrid(\"ge" +
"tPager\");\r\n            pager1.pagination({\r\n                showPageList: false," +
"\r\n                displayMsg: \"{from}-{to}/{total}\"\r\n            });\r\n        })" +
";\r\n\r\n        function AppendRow(userId) {\r\n            try {\r\n                jQ" +
"uery(\"#UserList\").datagrid(\"selectRecord\", userId);\r\n                var row = j" +
"Query(\'#UserList\').datagrid(\"getSelected\");\r\n                jQuery(\'#SelectedUs" +
"erList\').datagrid(\"appendRow\", row);\r\n\r\n                jQuery(\'#UserList\').data" +
"grid(\"deleteRow\", jQuery(\'#UserList\').datagrid(\"getRowIndex\", userId));\r\n       " +
"         jQuery(\'#UserList\').datagrid(\"unselectAll\");\r\n            } catch (e) {" +
"\r\n            }\r\n        }\r\n\r\n        function DeleteRow(userId) {\r\n            " +
"try {\r\n                jQuery(\"#SelectedUserList\").datagrid(\"selectRecord\", user" +
"Id);\r\n                var row = jQuery(\'#SelectedUserList\').datagrid(\"getSelecte" +
"d\");\r\n                var index = jQuery(\'#SelectedUserList\').datagrid(\"getRowIn" +
"dex\", row);\r\n                jQuery(\'#UserList\').datagrid(\"appendRow\", row);\r\n  " +
"              jQuery(\'#SelectedUserList\').datagrid(\"deleteRow\", jQuery(\'#Selecte" +
"dUserList\').datagrid(\"getRowIndex\", userId));\r\n            } catch (e) {\r\n      " +
"      }\r\n\r\n        }\r\n\r\n        //保存\r\n        function Save() {\r\n            var" +
" rows = jQuery(\'#SelectedUserList\').datagrid(\"getRows\");\r\n            var ids = " +
"\"\";\r\n            for (var i = 0; i < rows.length; i++) {\r\n                ids +=" +
" rows[i].userid + \",\";\r\n            }\r\n            jQuery.ajax({\r\n              " +
"  url: \"/api/UCenter/Role/SetUserRole\",\r\n                data: { \"UserID\": ids, " +
"\"RoleID\": roleId  },\r\n                type: \'post\',\r\n                dataType: \'" +
"json\',\r\n                success: function (data) {\r\n                    if (data" +
".success) {\r\n                        alert(\"操作成功！\");\r\n                        Cl" +
"oseDialog();\r\n                    } else {\r\n                        alert(data.m" +
"essage);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n" +
"\r\n\r\n    </script>\r\n");

});

        }
    }
}
#pragma warning restore 1591
