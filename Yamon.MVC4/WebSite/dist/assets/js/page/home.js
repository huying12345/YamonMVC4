function settime(e){return 0==countdown?(e.removeAttribute("disabled"),e.value="免费获取验证码",void(countdown=60)):(e.setAttribute("disabled",!0),e.value="重新发送("+countdown+")",countdown--,void setTimeout(function(){settime(e)},1e3))}ko.validation.rules.pattern.message="Invalid.",ko.validation.init({registerExtenders:!0,messagesOnModified:!0,insertMessages:!0,parseInputAttributes:!0,messageTemplate:null},!0);var viewModel={codeid:"",phone:ko.observable().extend({phoneUS:{params:!0,message:"电话不合法"},required:{message:"手机号码不能为空！"}}),MemberPassword:ko.observable().extend({required:{message:"密码不能为空！"},minLength:{params:6,message:"密码长度不能小于6个字符"},maxLength:{params:18,message:"密码长度不能大于18个字符"}}),password1:ko.observable().extend({required:{message:"确认密码不能为空！"}}),dxyzm:ko.observable("8888").extend({required:{message:"短息验证码不能为空！"}}),validate:ko.observable().extend({required:{message:"验证码不能为空！"}}),submit:function(){0===viewModel.errors().length?viewModel.MemberPassword()==viewModel.password1()?viewModel.GetMemberInfoCreate():(jQuery("#password1").next().show(),jQuery("#password1").next().text("两次密码不一致!")):viewModel.errors.showAllMessages()},validatecode:function(){YamonAPI.POST("/api/SiteManage/ValidateCode/GetValidateCode",function(e){e.success?($(".content-img img").attr("src","data:image/jpg;base64,"+e.image),viewModel.codeid=e.codeid):alert(e.message)})},GetMemberInfoCreate:function(){YamonAPI.POST("/api/Member/MemberInfo/Register",{MobileNo:viewModel.phone,MemberPassword:viewModel.MemberPassword,validate:viewModel.validate,codeid:viewModel.codeid},function(e){e.success?(alert("注册成功！"),window.location.href="Login.html"):(alert(e.message),viewModel.validatecode())})}};viewModel.errors=ko.validation.group(viewModel),viewModel.requireLocation=function(){viewModel.location.extend({required:!0})};var register=function(){var e=this;e.init=function(){e.checkboxs(),viewModel.validatecode()},e.checkboxs=function(){$("input:checkbox").click(function(){1==$("input[type='checkbox']").is(":checked")?jQuery("#btn_login").removeAttr("disabled"):jQuery("#btn_login").attr("disabled","disabled")})}},countdown=60;