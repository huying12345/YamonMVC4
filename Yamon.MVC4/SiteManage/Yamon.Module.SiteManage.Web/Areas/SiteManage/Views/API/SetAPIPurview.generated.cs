#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Yamon.Framework.Common;
    using Yamon.Module.SiteManage;
    using Yamon.Module.SiteManage.Entity;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Areas/SiteManage/Views/API/SetAPIPurview.cshtml")]
    public partial class _Areas_SiteManage_Views_API_SetAPIPurview_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Areas_SiteManage_Views_API_SetAPIPurview_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("<div");

WriteLiteral(" region=\"center\"");

WriteLiteral(" border=\"true\"");

WriteLiteral(" style=\"padding: 10px; background: #F6F6F6; border: 1px solid #ccc;\"");

WriteLiteral(">\r\n    <ul");

WriteLiteral(" id=\"apiTree\"");

WriteLiteral("></ul>\r\n</div>\r\n<div");

WriteLiteral(" region=\"south\"");

WriteLiteral(" border=\"false\"");

WriteLiteral(" style=\"text-align: right; background: #F6F6F6; height: 30px; line-height: 30px;\"" +
"");

WriteLiteral(">\r\n    <label>双击全选或取消选择子节点</label>\r\n    <a");

WriteLiteral(" id=\"btnSubmit\"");

WriteLiteral("\r\n       class=\"easyui-linkbutton\"");

WriteLiteral(" icon=\"icon-save\"");

WriteLiteral(" href=\"javascript:SetAPIPurview();\"");

WriteLiteral(">\r\n        保存\r\n    </a>\r\n    <a");

WriteLiteral(" id=\"btnCancel\"");

WriteLiteral("\r\n       class=\"easyui-linkbutton\"");

WriteLiteral(" icon=\"icon-cancel\"");

WriteLiteral(" href=\"javascript:CloseDialog();\"");

WriteLiteral(">\r\n        关闭\r\n    </a>\r\n</div>\r\n<script");

WriteLiteral(" type=\"text/javascript\"");

WriteLiteral(">\r\n    var _baseUrl = \'/SiteManage/API\';\r\n    var _apiUrl = \'/api/SiteManage/API\'" +
";\r\n    var apiList = \',");

            
            #line 18 "..\..\Areas\SiteManage\Views\API\SetAPIPurview.cshtml"
                Write(ViewBag.APIList);

            
            #line default
            #line hidden
WriteLiteral(",\';\r\n    var ischecked = false;\r\n    jQuery(function () {\r\n        jQuery(\'#apiTr" +
"ee\').tree({\r\n            url: _apiUrl + \'/EditTree?iscombo=123\',\r\n            an" +
"imate: true,\r\n            checkbox: true,\r\n            cascadeCheck: false,\r\n   " +
"         onDblClick: function (node) {\r\n                checkAllChild(node, isch" +
"ecked ? \'uncheck\' : \'check\');\r\n            },\r\n            onLoadSuccess: functi" +
"on (node, data) {\r\n                jQuery(\"#apiTree\").tree(\'collapseAll\');\r\n    " +
"            checkTree();\r\n            },\r\n            onCheck: function (node, c" +
"hecked) {\r\n                if (checked) {\r\n                    var parent = $(\"#" +
"apiTree\").tree(\'getParent\', node.target);\r\n                    if (parent) {\r\n  " +
"                      $(\"#apiTree\").tree(\'check\', parent.target);\r\n             " +
"       }\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    function" +
" SetAPIPurview() {\r\n        jQuery.ajax({\r\n            type: \'post\',\r\n          " +
"  dataType: \'json\',\r\n            url: \'/api/SiteManage/API/SetAPIPurview/\' + myP" +
"age.id,\r\n            data: { \"APIID\": getChecked() },\r\n            success: func" +
"tion (data) {\r\n                if (data.success) {\r\n                    alert(\"操" +
"作成功！\");\r\n                    parent.CloseDialog();\r\n                } else {\r\n  " +
"                  alert(\"操作失败：\" + data.message);\r\n                    return;\r\n " +
"               }\r\n            }\r\n        });\r\n    }\r\n\r\n    function getChecked()" +
" {\r\n        var nodes = $(\'#apiTree\').tree(\'getChecked\');\r\n        var s = \'\';\r\n" +
"        for (var i = 0; i < nodes.length; i++) {\r\n            if (s != \'\') s += " +
"\',\';\r\n            s += nodes[i].id;\r\n        }\r\n        return s;\r\n    }\r\n\r\n    " +
"function checkTree() {\r\n        var roots = $(\'#apiTree\').tree(\'getRoots\');\r\n   " +
"     for (var i = 0; i < roots.length; i++) {\r\n            checkChild(roots[i].t" +
"arget);\r\n        }\r\n    }\r\n\r\n    function checkChild(node) {\r\n        if (apiLis" +
"t.indexOf(\',\' + node.id + \',\') != -1) {\r\n            $(\'#apiTree\').tree(\'check\'," +
" node.target);\r\n        }\r\n        var childs = $(\'#apiTree\').tree(\'getChildren\'" +
", node.target);\r\n        for (var i = 0; i < childs.length; i++) {\r\n            " +
"checkChild(childs[i]);\r\n        }\r\n    }\r\n\r\n    function checkAllChild(node, che" +
"ckType) {\r\n        ischecked = checkType == \'check\';\r\n        $(\'#apiTree\').tree" +
"(checkType, node.target);\r\n        var childs = $(\'#apiTree\').tree(\'getChildren\'" +
", node.target);\r\n        for (var i = 0; i < childs.length; i++) {\r\n            " +
"checkAllChild(childs[i], checkType);\r\n        }\r\n    }\r\n</script>\r\n");

        }
    }
}
#pragma warning restore 1591
